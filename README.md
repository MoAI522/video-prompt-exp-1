# ビジョンモデルにplaywrightのスクリプトと録画を与えることで、仕様を洗い出す実験

## 概要

playwrightで自動操作した結果の画面録画をもとに、画面の仕様を洗い出す実験

以下のような簡易的なウェブサイトを作成し、それをplaywrightで自動操作したスクリプトとその動画を与える

- 以下３つのチェックボックスがある
  - 富士山
  - 鷹
  - 茄子
- ボタンを押すと、チェックボックスの組み合わせに応じたメッセージが表示される
  - チェックボックスが一つもチェックされていない場合
    - "ふつう"
  - チェックボックスが１つだけチェックされている場合
    - "ちょっとめでたい"
  - チェックボックスが２つだけチェックされている場合
    - 「鷹」「茄子」がチェックされている場合
      - "むしろおしい"
    - それ以外の組み合わせ
      - "ばりめでたい"
  - チェックボックスが３つともチェックされている場合
    - 「富士山」->「鷹」->「茄子」の順番でチェックされている場合
      - "来年が怖いくらい"
    - それ以外の順番
      - "超Happy New Year"

https://github.com/user-attachments/assets/9780957e-8797-4734-ae14-a76c1c0b9de3

[ソースコード](./testapp1/)

## 課題

ハードル１：動画の内容が認識できているか（＋文字が認識できているか） -> 仕様と結果のテキストが一致している　テキストはテストコード内に存在しないため

ハードル２：フォーマットにない隠れた観点を見いだせるか -> フォーマットにはチェックボックスのオンオフのみ記入するよう指示した上で、入力順によって出力が変わったことを指摘できるか

[設問プロンプト](./vision_test_1.md)

## 結果

gemini2.5pro：完璧に解けた 勝手にthinkingを始めた [thinking](./thinking_gemini2.5pro.md) [出力](./result_gemini2.5pro.md)

gemini1.5pro：2/6でチェック状態を間違えている、というかそもそも一件少ない [出力](./result_gemini1.5pro.md)

gemini1.5flash：2件多い　ただ、1.5proより若干チェック状態の精度がいい [出力](./result_gemini1.5flash.md)

## 結論

playwrightスクリプトと、その実行結果の動画をgemini2.5proに与えると、操作の結果を正確に認識し、そこから分かる仕様を説明できることがわかった

## メモ

- 入力は動画とプロンプト合わせて1000トークン程度、gemini2.5proはthinkingによって2000トークン程度出力があった
- 当たり前だが、あくまで試した範囲から確実に言える仕様のみに言及する。
  例えば、3つチェックした際、本当は「富士山」->「鷹」->「茄子」の順番でチェックされている場合とそうでない場合で分かれるという仕様だが、
  「富士山」->「鷹」->「茄子」の順番でチェックされている場合、と、「茄子」->「鷹」->「富士山」の場合、で分けて書いており、
  あくまでそれ以外の順番の仕様については言及しない
